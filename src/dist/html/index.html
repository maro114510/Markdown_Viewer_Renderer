<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>A4_Document</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<!-- highlight.js -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/default.min.css">

	<script src="./script/index.js"></script>
	<link rel="stylesheet" href="./styles/style.css">

	<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
	<script src="./script/mermaid.js"></script>
</head>

<body>
	<div id="fixed-bar">
		<div class="folder bar_button">
			<a href="javascript:void(0);" class="btn f_atag"  id="bar_folder">
				<img src="https://storage.googleapis.com/zenn-user-upload/d952fdac3686-20230608.png" alt="folder_close" width="36px">
			</a>
		</div>
		<div class="bar_button" id="export_button">
			<a href="javascript:void(0);" class="btn">
				<img src="https://storage.googleapis.com/zenn-user-upload/571593fb5604-20230608.png" alt="export_button" width="36px">
			</a>
		</div>
	</div>
	<div id="directory">
		<div id="directory-listing"></div>
	</div>
	<div class="main_content">
		<div class="page"><h1>クラス設計書 メイン</h1>
<ul>
<li>created by ( Atsuki Nohira )<ul>
<li>created at 2023/06/04</li>
</ul>
</li>
</ul>
<hr>
<h2>Summary</h2>
<p>本文書は、Markdown_Viewerの起動時に呼び出されるメインクラスの設計書である。
すでに作成されている<code>index.js</code>を元に、クラス設計書を作成する。</p>
<h2>Purpose</h2>
<p>クラス設計書を作成することで、クラスの役割や機能を明確にする。
メンバ変数などを定義することで、変数の管理を厳格にする。</p>
<p>メインプロセスとレンダラープロセスを峻別し、レンダラープロセスのクラス及びソースを別個に作成してモジュール化して読み込む</p>
<hr>
<h3>Before</h3>
<ul>
<li>メンバ変数<ul>
<li>None</li>
</ul>
<div style="page-break-after: always;"></div>
</li>
<li>関数<ul>
<li>handleMain<ul>
<li>パスの取得から、テンプレートへの挿入を行い監視するファイルのパス、テンプレートの絶対パスを返す</li>
<li><strong>メインプロセス</strong></li>
</ul>
</li>
<li>createWindow<ul>
<li>ウインドウの作成を行う</li>
<li>引数にテンプレートに挿入されたHTMLの絶対パスを受け取る</li>
<li><strong>レンダラープロセス</strong></li>
</ul>
</li>
<li>handleGetFilePath<ul>
<li>パスを取得する関数のラッピングクラス</li>
<li><strong>メインプロセス</strong></li>
</ul>
</li>
<li>handleGetFileEncoding<ul>
<li>開くマークダウンファイルのエンコーディングを取得する関数のラッピングクラス</li>
<li>引数にマークダウンファイルの絶対パスを受け取る</li>
<li><strong>メインプロセス</strong></li>
</ul>
</li>
<li>handleMarkdown<ul>
<li>マークダウンファイルをHTMLに変換する関数のラッピングクラス</li>
<li>引数に開いたマークダウンファイルの内容を受け取る</li>
<li><strong>メインプロセス</strong></li>
</ul>
</li>
<li>handleInsertHTML<ul>
<li>変換されたHTMLをテンプレートに挿入する関数のラッピングクラス</li>
<li>引数としてテンプレートに挿入された表示するためのHTMLを受け取る</li>
<li><strong>メインプロセス</strong></li>
</ul>
</li>
<li>handleExportPDF<ul>
<li>ドキュメントをPDFとして出力する関数のラッピングクラス</li>
<li>引数に<code>BrowserWindow</code>、<code>dialog</code>のインスタンスを受け取る</li>
<li><strong>メインプロセス</strong></li>
</ul>
</li>
<li>watchFileChanges<ul>
<li>編集しているファイルのパスを監視し、変更があった場合に再描画を行う関数</li>
<li>引数<ul>
<li><code>BrowserWindow</code>のインスタンス</li>
<li>監視するファイルのパス</li>
<li>テンプレートに挿入されたHTMLの絶対パス</li>
<li>コールバック関数</li>
</ul>
</li>
<li><strong>メインプロセス</strong></li>
</ul>
</li>
<li>reloadWindow<ul>
<li>ウインドウの再描画を行う関数</li>
<li>引数に描画するファイルのパスを受け取る</li>
<li><strong>レンダラープロセス</strong></li>
</ul>
</li>
<li>loadWindow<ul>
<li>画面をロードする関数</li>
<li>引数<ul>
<li><code>BrowserWindow</code>のインスタンス</li>
<li>テンプレートに挿入されたHTMLの絶対パス</li>
</ul>
</li>
</ul>
</li>
<li><code>app.on(&#39;ready&#39;)</code><ul>
<li>アプリケーションの起動時に呼び出される関数<ul>
<li>ウインドウの作成</li>
<li>ファイルの監視</li>
</ul>
</li>
<li><strong>メインプロセス</strong></li>
</ul>
</li>
<li><code>app.on(&#39;window-all-closed&#39;)</code><ul>
<li>全てのウインドウが閉じられた時に呼び出される関数</li>
<li><strong>メインプロセス</strong></li>
</ul>
</li>
<li><code>app.on(&#39;activate&#39;)</code><ul>
<li>アプリケーションがアクティブになった時に呼び出される関数</li>
<li><strong>メインプロセス</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h2>再定義</h2>
<h3>メンバ変数</h3>
<table>
<thead>
<tr>
<th align="center">変数名</th>
<th align="center">型</th>
<th align="center">内容</th>
<th align="center">備考</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>mainWindow</code></td>
<td align="center"><code>BrowserWindow</code></td>
<td align="center">メインウインドウのインスタンス</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>currentDir</code></td>
<td align="center"><code>string</code></td>
<td align="center">プロジェクトのあるディレクトリの絶対パス</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>templatePath</code></td>
<td align="center"><code>string</code></td>
<td align="center">テンプレートの絶対パス</td>
<td align="center">メインプロセス</td>
</tr>
<tr>
<td align="center"><code>watchFilesPath</code></td>
<td align="center"><code>list</code></td>
<td align="center">監視するファイルの絶対パス</td>
<td align="center">今後ディレクトリにて取得する可能性があるため、配列にする</td>
</tr>
<tr>
<td align="center"><code>outputsPath</code></td>
<td align="center"><code>list</code></td>
<td align="center">出力するファイルの絶対パス</td>
<td align="center">今後ディレクトリにて取得する可能性があるため、配列にする</td>
</tr>
<tr>
<td align="center"><code>rendererApp</code></td>
<td align="center"><code>RendererApp</code></td>
<td align="center">レンダラープロセスのインスタンス</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3>関数</h3>
<table>
<thead>
<tr>
<th align="center">関数名</th>
<th align="center">引数</th>
<th align="center">戻り値</th>
<th align="center">内容</th>
<th align="center">備考</th>
</tr>
</thead>
<div class="page-break"></div>
<tbody><tr>
<td align="center"><code>handleMain</code></td>
<td align="center"><code>none</code></td>
<td align="center"><code>none</code></td>
<td align="center">メインプロセスの処理を行う関数</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>createWindow</code></td>
<td align="center"><code>templatePath</code></td>
<td align="center"><code>BrowserWindow</code></td>
<td align="center">ウインドウの作成を行う関数</td>
<td align="center">レンダラープロセスにてモジュール化し、本クラスで呼び出す</td>
</tr>
<tr>
<td align="center"><code>handleGetFilePath</code></td>
<td align="center"><code>none</code></td>
<td align="center"><code>string</code></td>
<td align="center">ファイルのパスを取得する関数のラッピングクラス</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>handleGetFileEncoding</code></td>
<td align="center"><code>filePath</code></td>
<td align="center"><code>string</code></td>
<td align="center">ファイルのエンコーディングを取得する関数のラッピングクラス</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>handleMarkdown</code></td>
<td align="center"><code>fileContent</code></td>
<td align="center"><code>string</code></td>
<td align="center">マークダウンファイルをHTMLに変換する関数のラッピングクラス</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>handleInsertHTML</code></td>
<td align="center"><code>html</code></td>
<td align="center"><code>string</code></td>
<td align="center">変換されたHTMLをテンプレートに挿入する関数のラッピングクラス</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>handleExportPDF</code></td>
<td align="center"><code>window</code>, <code>dialog</code></td>
<td align="center"><code>none</code></td>
<td align="center">ドキュメントをPDFとして出力する関数のラッピングクラス</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>watchFileChanges</code></td>
<td align="center"><code>window</code>, <code>watchFilePath</code>, <code>templatePath</code>, <code>callback</code></td>
<td align="center"><code>none</code></td>
<td align="center">編集しているファイルのパスを監視し、変更があった場合に再描画を行う関数</td>
<td align="center">複数ファイルを監視出来るのか??要検討</td>
</tr>
<tr>
<td align="center"><code>reloadWindow</code></td>
<td align="center"><code>filePath</code></td>
<td align="center"><code>none</code></td>
<td align="center">ウインドウの再描画を行う関数</td>
<td align="center">レンダラープロセスにてモジュール化し、本クラスで呼び出す</td>
</tr>
<tr>
<td align="center"><code>loadWindow</code></td>
<td align="center"><code>window</code>, <code>templatePath</code></td>
<td align="center"><code>none</code></td>
<td align="center">画面をロードする関数</td>
<td align="center">レンダラープロセスにてモジュール化し、本クラスで呼び出す</td>
</tr>
<tr>
<td align="center"><code>app.on(&#39;ready&#39;)</code></td>
<td align="center"><code>none</code></td>
<td align="center"><code>none</code></td>
<td align="center">アプリケーションの起動時に呼び出される関数</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>app.on(&#39;window-all-closed&#39;)</code></td>
<td align="center"><code>none</code></td>
<td align="center"><code>none</code></td>
<td align="center">全てのウインドウが閉じられた時に呼び出される関数</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>app.on(&#39;activate&#39;)</code></td>
<td align="center"><code>none</code></td>
<td align="center"><code>none</code></td>
<td align="center">アプリケーションがアクティブになった時に呼び出される関数</td>
<td align="center"></td>
</tr>
</tbody></table>
<hr>
<h4>modify history</h4>
<table>
<thead>
<tr>
<th align="center">date</th>
<th align="center">modifier</th>
<th align="center">content</th>
</tr>
</thead>
<tbody><tr>
<td align="center">2023/06/04</td>
<td align="center">Atsuki Nohira</td>
<td align="center">新規作成</td>
</tr>
</tbody></table>
</div>

	</div>
</body>
<script src="./script/directory.js"></script>
<script src="./script/view.js"></script>
</html>